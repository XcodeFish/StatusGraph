# StatusGraph - Cursor 开发规则

## 项目概述

StatusGraph是一个轻量级状态管理可视化工具，专注于提供高性能、低侵入的状态监控和调试体验。本规则文档旨在指导开发者使用Cursor IDE高效开发StatusGraph项目。

## 代码风格与约定

### 基本约定

1. **轻量化优先**：
   - 核心代码保持在5KB以内
   - 避免不必要的依赖
   - 采用模块化设计，支持按需加载

2. **性能优化**：
   - 严格控制内存使用（<10MB）
   - 优化CPU占用（平均<3%）
   - 使用增量计算和结构共享
   - 关键算法考虑WebAssembly实现

3. **错误处理**：
   - 实现完善的错误隔离机制
   - 所有外部交互需进行异常捕获
   - 支持自动降级策略

### 文件结构

- `/src/core` - 核心劫持层和基础功能
- `/src/adapters` - 各框架适配器
- `/src/storage` - 状态存储与管理
- `/src/ui` - 可视化界面组件
- `/src/utils` - 工具函数
- `/src/workers` - 后台工作线程

### 命名规范

- 使用驼峰命名法（camelCase）命名变量和函数
- 使用帕斯卡命名法（PascalCase）命名类和组件
- 使用全大写下划线（UPPER_SNAKE_CASE）命名常量

## 工作流程

### 开发流程

1. 功能开发前进行性能和体积评估
2. 遵循轻量级设计原则，分离核心功能与增强功能
3. 实现自动化测试，保证覆盖率
4. 性能优化应贯穿开发全过程

### 版本管理

按照项目路线图进行版本迭代：

- 1.0版本：专注于轻量核心功能
- 2.0版本：增强功能模块
- 3.0版本：智能分析能力

## 技术标准

### 代码质量

- **兼容性**：支持Chrome >= 88、Firefox >= 85、Edge >= 88、Safari >= 14
- **安全性**：符合GDPR/CCPA/PIPL等隐私法规
- **性能标准**：
  - 支持100,000+状态节点下保持60fps
  - 启动时间<100ms
  - 低内存占用模式自动启用

### 测试要求

- 单元测试覆盖核心功能
- 集成测试验证与各框架兼容性
- 性能测试确保满足基准指标
- 跨浏览器兼容性测试

## 插件开发指南

为StatusGraph开发插件时：

1. 遵循插件接口定义
2. 确保插件不会显著增加资源占用
3. 提供完善的文档
4. 实现适当的错误处理机制

## AI协作指南

使用Cursor AI辅助开发时的建议：

1. 优先让AI关注性能优化方案
2. 使用AI生成代码时保持轻量化原则
3. 请求AI帮助审查代码中可能的性能问题
4. 利用AI优化数据结构和算法

## 安全开发指南

1. 实现数据脱敏功能
2. 确保所有数据默认存储在本地
3. 实现用户可控的数据保留策略
4. 避免任何不必要的数据收集
